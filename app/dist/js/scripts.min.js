var APP=function(){function e(e){var n=Array.prototype.slice.apply(document.querySelectorAll(e));return n||(n=[]),n}function n(){function n(e,n){e=e||null,n=n||null,this.elem=e,this.value=n,this.hasChanged=!1,this.oninput=function(){}}var t=this;e(".model").forEach(function(e){e.classList.forEach(function(a){var r=a.match(/model\-/g);if(r){var i=a.slice(6),o=e.value;i.indexOf("Month")>-1?o-=1:i.indexOf(!1)&&(o=o||"00:00"),t[i]=t[i]||new n(e,o),e.binding=e.binding||t[i],e.oninput=function(){t[i].hasChanged=!0,t[i]=t[i]||new n(e,o),t[i].value=e.value,t.updateCalculations(),t[i].oninput()}}})}),t.updateCalculations=function(){t.startMin=t.startMin||new n(null,t.startTime.value.split(":")[1]),t.startHour=t.startHour||new n(null,t.startTime.value.split(":")[0]),t.endMin=t.endMin||new n(null,t.endTime.value.split(":")[1]),t.endHour=t.endHour||new n(null,t.endTime.value.split(":")[0]),t.date=t.date||new n,t.date.value=new Date(t.startYear.value,t.startMonth.value,t.startDay.value)},t.updateCalculations()}function t(e,n,t){n.classList.contains("placeholder")&&n.classList.remove("placeholder"),""===e.value&&(e.value=t,e.hasChanged=!1,n.classList.add("placeholder")),n.innerHTML=e.value}function a(){var n=this,t=!1,a="Please correct the following errors: <br>",r=e(".people>div"),i=[{errorMessage:"Please include a title.",validationMethod:function(){return c.title.hasChanged}},{errorMessage:"Please include a description.",validationMethod:function(){return c.description.hasChanged}},{errorMessage:"Please include guests.",validationMethod:function(){return r.length>0?!0:!1}},{errorMessage:"Please include valid email addresses.",validationMethod:function(){var e=!1,n=new RegExp("^[-a-z0-9~!$%^&*_=+}{'?]+(.[-a-z0-9~!$%^&*_=+}{'?]+)*@([a-z0-9_][-a-z0-9_]*(.[-a-z0-9_]+)*.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,5})?$");return r.forEach(function(t,a){var r=n.exec(t.value);e=r&&0===r.index?0===a?!0:e&&!0:e&&!1}),e}}];return i.forEach(function(e,r){e.validationMethod(n)?t=0===r?!0:t&&!0:(t=t&&!1,a=a+e.errorMessage+"<br>")}),a=a.trim(),{isValid:t,errorMessage:a}}var r=e(".day");r.forEach(function(e){for(day=1;day<32;day++){var n=document.createElement("option");day<10?day="0"+day:day+="",n.innerHTML=day,e.appendChild(n)}});var i=e(".month");i.forEach(function(e){for(month=1;month<13;month++){var n=document.createElement("option");month<10?month="0"+month:month+="",n.innerHTML=month,e.appendChild(n)}});var o=e(".year");o.forEach(function(e){for(year=2015;year<2021;year++){var n=document.createElement("option");n.innerHTML=year+"",e.appendChild(n)}});var l=document.querySelector("input.new-guest"),u=document.querySelector(".attendees");l.onkeydown=function(e){if("Enter"===e.keyIdentifier){var n=document.createElement("div"),t=document.createElement("button");t.innerHTML="-",t.parent=n,t.onclick=function(){u.removeChild(this.parent)},n.innerHTML=l.value,n.value=l.value,n.appendChild(t),u.appendChild(n),l.value=""}};var c=new n;c.title.oninput=function(){var e=document.querySelector(".title-display");t(c.title,e,"Untitled Event")},c.description.oninput=function(){var e=document.querySelector(".card-detail-actual.what");t(c.description,e,"Description")},c.location.oninput=function(){var e=document.querySelector(".card-detail-actual.where");t(c.location,e,"Place")};var d=document.querySelector(".card-detail-actual.when");e(".input-datetime").forEach(function(e){e.binding.oninput=function(){var e=c.date.value.toDateString()+" from "+c.startTime.value+" to "+c.endTime.value;t({value:e},d,"Time")}});var s=document.querySelector("button#create");s.onclick=function(){var e=a();if(e.isValid)alert("Valid form. Thanks for submitting!");else{var n=document.querySelector(".error-message");n.innerHTML=e.errorMessage}}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQVBQIiwiZ2V0RG9tTm9kZUFycmF5Iiwic2VsZWN0b3IiLCJub2RlcyIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJhcHBseSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIk1vZGVsIiwiQmluZGluZyIsImVsZW0iLCJ2YWx1ZSIsInRoaXMiLCJoYXNDaGFuZ2VkIiwib25pbnB1dCIsInNlbGYiLCJmb3JFYWNoIiwiY2xhc3NMaXN0IiwiY2xhc3NOYW1lIiwicG9zc2libHlNYXRjaCIsIm1hdGNoIiwibmFtZSIsImluZGV4T2YiLCJiaW5kaW5nIiwidXBkYXRlQ2FsY3VsYXRpb25zIiwic3RhcnRNaW4iLCJzdGFydFRpbWUiLCJzcGxpdCIsInN0YXJ0SG91ciIsImVuZE1pbiIsImVuZFRpbWUiLCJlbmRIb3VyIiwiZGF0ZSIsIkRhdGUiLCJzdGFydFllYXIiLCJzdGFydE1vbnRoIiwic3RhcnREYXkiLCJkaXNwbGF5V2l0aFBsYWNlaG9sZGVyIiwiaW5wdXRCaW5kaW5nIiwiZGlzcGxheUVsZW0iLCJwbGFjZWhvbGRlciIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwiaW5uZXJIVE1MIiwidmFsaWRhdGUiLCJhbGxHb29kIiwiZXJyb3JNZXNzYWdlIiwicGVvcGxlIiwidmFsaWRhdGlvbnMiLCJ2YWxpZGF0aW9uTWV0aG9kIiwibW9kZWwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibGVuZ3RoIiwiYXJlUmVhbCIsImVtYWlsUmVnZXgiLCJSZWdFeHAiLCJndWVzdCIsImluZGV4IiwicmVzdWx0IiwiZXhlYyIsInZhbCIsInRyaW0iLCJpc1ZhbGlkIiwiZGF5U2VsZWN0b3JzIiwic2VsZWN0RWxlbWVudCIsImRheSIsIm5ld09wdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIm1vbnRoU2VsZWN0b3JzIiwibW9udGgiLCJ5ZWFyU2VsZWN0b3JzIiwieWVhciIsIm5ld0d1ZXN0IiwicXVlcnlTZWxlY3RvciIsIm9ua2V5ZG93biIsImV2dCIsImtleUlkZW50aWZpZXIiLCJlbnRlcmVkUGVyc29uIiwiZGVsZXRlUGVyc29uIiwicGFyZW50Iiwib25jbGljayIsInJlbW92ZUNoaWxkIiwidGl0bGVEaXNwbGF5IiwiZGVzY3JpcHRpb25EaXNwbGF5IiwibG9jYXRpb24iLCJsb2NhdGlvbkRpc3BsYXkiLCJ3aGVuRGlzcGxheSIsInRpbWVUb0Rpc3BsYXkiLCJ0b0RhdGVTdHJpbmciLCJjcmVhdGVCdXR0b24iLCJ2YWxpZFN0YXRlIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLEtBQU0sV0FNVixRQUFTQyxHQUFnQkMsR0FDdkIsR0FBSUMsR0FBUUMsTUFBTUMsVUFBVUMsTUFBTUMsTUFBTUMsU0FBU0MsaUJBQWlCUCxHQUlsRSxPQUhLQyxLQUNIQSxNQUVLQSxFQWlFUCxRQUtPTyxLQUdQLFFBQVNDLEdBQVFDLEVBQU1DLEdBQ3JCRCxFQUFPQSxHQUFRLEtBQ2ZDLEVBQVFBLEdBQVMsS0FFakJDLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtELE1BQVFBLEVBQ2JDLEtBQUtDLFlBQWEsRUFDbEJELEtBQUtFLFFBQVUsYUFUakIsR0FBSUMsR0FBT0gsSUFVVmIsR0FHZSxVQUFVaUIsUUFBUSxTQUFVTixHQUMxQ0EsRUFBS08sVUFBVUQsUUFBUSxTQUFVRSxHQUMvQixHQUFJQyxHQUFnQkQsRUFBVUUsTUFBTSxXQUNwQyxJQUFJRCxFQUFlLENBRWpCLEdBQUlFLEdBQU9ILEVBQVVkLE1BQU0sR0FDdkJPLEVBQVFELEVBQUtDLEtBR2JVLEdBQUtDLFFBQVEsU0FBVyxHQUMxQlgsR0FBZ0IsRUFDUFUsRUFBS0MsU0FBUSxLQUN0QlgsRUFBUUEsR0FBUyxTQUduQkksRUFBS00sR0FBUU4sRUFBS00sSUFBUyxHQUFJWixHQUFRQyxFQUFNQyxHQUM3Q0QsRUFBS2EsUUFBVWIsRUFBS2EsU0FBV1IsRUFBS00sR0FBTVgsRUFHckNJLFFBQVUsV0FDYkMsRUFBS00sR0FBTVIsWUFBYSxFQUN4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LElBQUlDLEdBQWNuRixTQUFTc0UsY0FBYywyQkFDekM3RSxHQUFnQixtQkFBbUJpQixRQUFRLFNBQVVOLEdBQ25EQSxFQUFLYSxRQUFRVCxRQUFVLFdBRXJCLEdBQUk0RSxHQUFnQnZDLEVBQU1uQixLQUFLckIsTUFBTWdGLGVBQWlCLFNBQVd4QyxFQUFNekIsVUFBVWYsTUFBUSxPQUFTd0MsRUFBTXJCLFFBQVFuQixLQUNoSDBCLElBQXdCMUIsTUFBTytFLEdBQWdCRCxFQUFhLFVBMkVoRSxJQUFJRyxHQUFldEYsU0FBU3NFLGNBQWMsZ0JBQzFDZ0IsR0FBYVQsUUFBVSxXQUNyQixHQUFJVSxHQUFhaEQsR0FFakIsSUFBS2dELEVBQVc3QixRQUlkOEIsTUFBTSwwQ0FKaUIsQ0FDdkIsR0FBSS9DLEdBQWV6QyxTQUFTc0UsY0FBYyxpQkFDMUM3QixHQUFhSCxVQUFZaUQsRUFBVzlDIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFQUCA9IChmdW5jdGlvbigpIHtcbi8qKlxuICogQ3JlYXRlcyBhbiBBcnJheSBvZiBET00gbm9kZXMgdGhhdCBtYXRjaCB0aGUgc2VsZWN0b3JcbiAqIEBwYXJhbSBzZWxlY3RvciB7c3RyaW5nfSBDU1Mgc2VsZWN0b3IgLSBzZWxlY3RvciB0byBtYXRjaCBhZ2FpbnN0XG4gKiBAcmV0dXJuIHthcnJheX0gQXJyYXkgb2YgRE9NIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIGdldERvbU5vZGVBcnJheShzZWxlY3Rvcikge1xuICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICBpZiAoIW5vZGVzKSB7XG4gICAgbm9kZXMgPSBbXTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5cbi8qXG5HZW5lcmF0ZSBhbGwgdGhlIG9wdGlvbnMgZm9yIHRoZSBkYXRlIGVudHJpZXNcbiAqL1xudmFyIGRheVNlbGVjdG9ycyA9IGdldERvbU5vZGVBcnJheSgnLmRheScpO1xuZGF5U2VsZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKHNlbGVjdEVsZW1lbnQpIHtcbiAgZm9yIChkYXkgPSAxOyBkYXkgPCAzMjsgZGF5KyspIHtcbiAgICB2YXIgbmV3T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgaWYgKGRheSA8IDEwKSB7XG4gICAgICBkYXkgPSBcIjBcIiArIGRheTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF5ID0gZGF5ICsgXCJcIjtcbiAgICB9XG4gICAgbmV3T3B0aW9uLmlubmVySFRNTCA9IGRheTtcbiAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG5ld09wdGlvbik7XG4gIH1cbn0pO1xuXG52YXIgbW9udGhTZWxlY3RvcnMgPSBnZXREb21Ob2RlQXJyYXkoJy5tb250aCcpO1xubW9udGhTZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0RWxlbWVudCkge1xuICBmb3IgKG1vbnRoID0gMTsgbW9udGggPCAxMzsgbW9udGgrKykge1xuICAgIHZhciBuZXdPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb250aCA9IG1vbnRoICsgXCJcIjtcbiAgICB9XG4gICAgbmV3T3B0aW9uLmlubmVySFRNTCA9IG1vbnRoO1xuICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3T3B0aW9uKTtcbiAgfVxufSk7XG5cbnZhciB5ZWFyU2VsZWN0b3JzID0gZ2V0RG9tTm9kZUFycmF5KCcueWVhcicpO1xueWVhclNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3RFbGVtZW50KSB7XG4gIGZvciAoeWVhciA9IDIwMTU7IHllYXIgPCAyMDIxOyB5ZWFyKyspIHtcbiAgICB2YXIgbmV3T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgbmV3T3B0aW9uLmlubmVySFRNTCA9IHllYXIgKyBcIlwiO1xuICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3T3B0aW9uKTtcbiAgfVxufSk7XG5cbi8qXG5BZGRpbmcgZ3Vlc3RzXG4gKi9cbnZhciBuZXdHdWVzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Lm5ldy1ndWVzdCcpO1xudmFyIHBlb3BsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdHRlbmRlZXMnKTtcbm5ld0d1ZXN0Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKGV2dC5rZXlJZGVudGlmaWVyID09PSBcIkVudGVyXCIpIHtcbiAgICB2YXIgZW50ZXJlZFBlcnNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBkZWxldGVQZXJzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBkZWxldGVQZXJzb24uaW5uZXJIVE1MID0gXCItXCI7XG4gICAgZGVsZXRlUGVyc29uLnBhcmVudCA9IGVudGVyZWRQZXJzb247XG5cbiAgICBkZWxldGVQZXJzb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHBlb3BsZS5yZW1vdmVDaGlsZCh0aGlzLnBhcmVudCk7XG4gICAgfTtcbiAgICBlbnRlcmVkUGVyc29uLmlubmVySFRNTCA9IG5ld0d1ZXN0LnZhbHVlO1xuICAgIGVudGVyZWRQZXJzb24udmFsdWUgPSBuZXdHdWVzdC52YWx1ZTsgLy8gZm9yIGVhc3kgYWNjZXNzIGxhdGVyXG4gICAgZW50ZXJlZFBlcnNvbi5hcHBlbmRDaGlsZChkZWxldGVQZXJzb24pO1xuXG4gICAgcGVvcGxlLmFwcGVuZENoaWxkKGVudGVyZWRQZXJzb24pO1xuICAgIG5ld0d1ZXN0LnZhbHVlID0gXCJcIjtcbiAgfVxufTtcblxuLypcbmNsYXNzPVwibW9kZWwgbW9kZWwtKlwiIFJlZmVyIHRvIGlucHV0cyBieSB0aGUgbmFtZSBhZnRlciBjbGFzcyBtb2RlbC0qXG4gKi9cbmZ1bmN0aW9uIE1vZGVsKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gQmluZGluZyhlbGVtLCB2YWx1ZSkge1xuICAgIGVsZW0gPSBlbGVtIHx8IG51bGw7XG4gICAgdmFsdWUgPSB2YWx1ZSB8fCBudWxsO1xuXG4gICAgdGhpcy5lbGVtID0gZWxlbTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5oYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5vbmlucHV0ID0gZnVuY3Rpb24oKSB7fTtcbiAgfVxuXG4gIC8vIHB1bGxzIHZhbHVlcyBmcm9tIGVsZW1zIG9mIGNsYXNzPVwibW9kZWwgbW9kZWwtKlwiIHRvIGNyZWF0ZSBNb2RlbCdzIHJhdyBpbmZvIGFuZCBzZXQgdXAgMS13YXkgYmluZGluZ1xuICBnZXREb21Ob2RlQXJyYXkoJy5tb2RlbCcpLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICBlbGVtLmNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgIHZhciBwb3NzaWJseU1hdGNoID0gY2xhc3NOYW1lLm1hdGNoKC9tb2RlbFxcLS9nKTtcbiAgICAgIGlmIChwb3NzaWJseU1hdGNoKSB7XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgTW9kZWwgdmFsdWVcbiAgICAgICAgdmFyIG5hbWUgPSBjbGFzc05hbWUuc2xpY2UoNik7XG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW0udmFsdWU7XG5cbiAgICAgICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChuYW1lLmluZGV4T2YoXCJNb250aFwiKSA+IC0xKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAobmFtZS5pbmRleE9mKFwiVGltZVwiID4gLTEpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSB8fCAnMDA6MDAnO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZltuYW1lXSA9IHNlbGZbbmFtZV0gfHwgbmV3IEJpbmRpbmcoZWxlbSwgdmFsdWUpO1xuICAgICAgICBlbGVtLmJpbmRpbmcgPSBlbGVtLmJpbmRpbmcgfHwgc2VsZltuYW1lXTtcblxuICAgICAgICAvLyBiaW5kIGRhdGEgb25pbnB1dFxuICAgICAgICBlbGVtLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZltuYW1lXS5oYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmW25hbWVdID0gc2VsZltuYW1lXSB8fCBuZXcgQmluZGluZyhlbGVtLCB2YWx1ZSk7XG4gICAgICAgICAgc2VsZltuYW1lXS52YWx1ZSA9IGVsZW0udmFsdWU7XG4gICAgICAgICAgc2VsZi51cGRhdGVDYWxjdWxhdGlvbnMoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBmb3IgY2FsbGJhY2tzXG4gICAgICAgICAgc2VsZltuYW1lXS5vbmlucHV0KCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHNlbGYudXBkYXRlQ2FsY3VsYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHNlbGYuc3RhcnRNaW4gPSBzZWxmLnN0YXJ0TWluIHx8IG5ldyBCaW5kaW5nKG51bGwsIHNlbGYuc3RhcnRUaW1lLnZhbHVlLnNwbGl0KCc6JylbMV0pO1xuICAgIHNlbGYuc3RhcnRIb3VyID0gc2VsZi5zdGFydEhvdXIgfHwgbmV3IEJpbmRpbmcobnVsbCwgc2VsZi5zdGFydFRpbWUudmFsdWUuc3BsaXQoJzonKVswXSk7XG4gICAgc2VsZi5lbmRNaW4gPSBzZWxmLmVuZE1pbiB8fCBuZXcgQmluZGluZyhudWxsLCBzZWxmLmVuZFRpbWUudmFsdWUuc3BsaXQoJzonKVsxXSk7XG4gICAgc2VsZi5lbmRIb3VyID0gc2VsZi5lbmRIb3VyIHx8IG5ldyBCaW5kaW5nKG51bGwsIHNlbGYuZW5kVGltZS52YWx1ZS5zcGxpdCgnOicpWzBdKTtcblxuICAgIHNlbGYuZGF0ZSA9IHNlbGYuZGF0ZSB8fCBuZXcgQmluZGluZygpO1xuXG4gICAgc2VsZi5kYXRlLnZhbHVlID0gbmV3IERhdGUoc2VsZi5zdGFydFllYXIudmFsdWUsIHNlbGYuc3RhcnRNb250aC52YWx1ZSwgc2VsZi5zdGFydERheS52YWx1ZSk7XG4gIH07XG5cbiAgc2VsZi51cGRhdGVDYWxjdWxhdGlvbnMoKTtcbn07XG5cbi8qXG5UbyBjcmVhdGUgYSBwbGFjZWhvbGRlciBlZmZlY3QuIEFzc3VtZXMgdGhhdCBkaXNwbGF5IGVsZW1lbnQgc3RhcnRzIHdpdGggJ3BsYWNlaG9sZGVyJyBjbGFzc1xuICovXG5mdW5jdGlvbiBkaXNwbGF5V2l0aFBsYWNlaG9sZGVyIChpbnB1dEJpbmRpbmcsIGRpc3BsYXlFbGVtLCBwbGFjZWhvbGRlcikge1xuICBpZiAoZGlzcGxheUVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdwbGFjZWhvbGRlcicpKSB7XG4gICAgZGlzcGxheUVsZW0uY2xhc3NMaXN0LnJlbW92ZSgncGxhY2Vob2xkZXInKTtcbiAgfTtcbiAgaWYgKGlucHV0QmluZGluZy52YWx1ZSA9PT0gXCJcIikge1xuICAgIGlucHV0QmluZGluZy52YWx1ZSA9IHBsYWNlaG9sZGVyO1xuICAgIC8vIGxldCB0aGUgbW9kZWwga25vdyB0aGF0IGlucHV0IGhhcyBnb25lIGJhY2sgdG8gZGVmYXVsdFxuICAgIGlucHV0QmluZGluZy5oYXNDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICBkaXNwbGF5RWxlbS5jbGFzc0xpc3QuYWRkKCdwbGFjZWhvbGRlcicpO1xuICB9XG4gIGRpc3BsYXlFbGVtLmlubmVySFRNTCA9IGlucHV0QmluZGluZy52YWx1ZTtcbn07XG52YXIgbW9kZWwgPSBuZXcgTW9kZWwoKTtcblxuLy8gVXBkYXRlIHRoZSB2aWV3IG9uaW5wdXRcbm1vZGVsLnRpdGxlLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0aXRsZURpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGl0bGUtZGlzcGxheScpO1xuICBkaXNwbGF5V2l0aFBsYWNlaG9sZGVyKG1vZGVsLnRpdGxlLCB0aXRsZURpc3BsYXksIFwiVW50aXRsZWQgRXZlbnRcIik7XG59O1xuXG5tb2RlbC5kZXNjcmlwdGlvbi5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZGVzY3JpcHRpb25EaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtZGV0YWlsLWFjdHVhbC53aGF0Jyk7XG4gIGRpc3BsYXlXaXRoUGxhY2Vob2xkZXIobW9kZWwuZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9uRGlzcGxheSwgXCJEZXNjcmlwdGlvblwiKTtcbn07XG5cbm1vZGVsLmxvY2F0aW9uLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsb2NhdGlvbkRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1kZXRhaWwtYWN0dWFsLndoZXJlJyk7XG4gIGRpc3BsYXlXaXRoUGxhY2Vob2xkZXIobW9kZWwubG9jYXRpb24sIGxvY2F0aW9uRGlzcGxheSwgXCJQbGFjZVwiKTtcbn07XG5cbnZhciB3aGVuRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWRldGFpbC1hY3R1YWwud2hlbicpO1xuZ2V0RG9tTm9kZUFycmF5KCcuaW5wdXQtZGF0ZXRpbWUnKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gIGVsZW0uYmluZGluZy5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIFRPRE86IGEgYml0IGhhY2t5XG4gICAgdmFyIHRpbWVUb0Rpc3BsYXkgPSBtb2RlbC5kYXRlLnZhbHVlLnRvRGF0ZVN0cmluZygpICsgXCIgZnJvbSBcIiArIG1vZGVsLnN0YXJ0VGltZS52YWx1ZSArIFwiIHRvIFwiICsgbW9kZWwuZW5kVGltZS52YWx1ZTtcbiAgICBkaXNwbGF5V2l0aFBsYWNlaG9sZGVyKHt2YWx1ZTogdGltZVRvRGlzcGxheX0sIHdoZW5EaXNwbGF5LCBcIlRpbWVcIik7XG4gIH07XG59KTtcblxuZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGFsbEdvb2QgPSBmYWxzZTtcbiAgdmFyIGVycm9yTWVzc2FnZSA9IFwiUGxlYXNlIGNvcnJlY3QgdGhlIGZvbGxvd2luZyBlcnJvcnM6IDxicj5cIjtcbiAgdmFyIHBlb3BsZSA9IGdldERvbU5vZGVBcnJheSgnLnBlb3BsZT5kaXYnKTtcbiAgXG4gIHZhciB2YWxpZGF0aW9ucyA9IFtcbiAgICB7XG4gICAgICBlcnJvck1lc3NhZ2U6IFwiUGxlYXNlIGluY2x1ZGUgYSB0aXRsZS5cIixcbiAgICAgIHZhbGlkYXRpb25NZXRob2Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbW9kZWwudGl0bGUuaGFzQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGVycm9yTWVzc2FnZTogXCJQbGVhc2UgaW5jbHVkZSBhIGRlc2NyaXB0aW9uLlwiLFxuICAgICAgdmFsaWRhdGlvbk1ldGhvZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZGVzY3JpcHRpb24uaGFzQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGVycm9yTWVzc2FnZTogXCJQbGVhc2UgaW5jbHVkZSBndWVzdHMuXCIsXG4gICAgICB2YWxpZGF0aW9uTWV0aG9kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChwZW9wbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgZXJyb3JNZXNzYWdlOiBcIlBsZWFzZSBpbmNsdWRlIHZhbGlkIGVtYWlsIGFkZHJlc3Nlcy5cIixcbiAgICAgIHZhbGlkYXRpb25NZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZVJlYWwgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVtYWlsUmVnZXggPSBuZXcgUmVnRXhwKFwiXlstYS16MC05fiEkJV4mKl89K317XFwnP10rKFxcLlstYS16MC05fiEkJV4mKl89K317XFwnP10rKSpAKFthLXowLTlfXVstYS16MC05X10qKFxcLlstYS16MC05X10rKSpcXC4oYWVyb3xhcnBhfGJpenxjb218Y29vcHxlZHV8Z292fGluZm98aW50fG1pbHxtdXNldW18bmFtZXxuZXR8b3JnfHByb3x0cmF2ZWx8bW9iaXxbYS16XVthLXpdKXwoWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfSkpKDpbMC05XXsxLDV9KT8kXCIpO1xuICAgICAgICBwZW9wbGUuZm9yRWFjaChmdW5jdGlvbiAoZ3Vlc3QsIGluZGV4KSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGVtYWlsUmVnZXguZXhlYyhndWVzdC52YWx1ZSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHRbJ2luZGV4J10gPT09IDApIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICBhcmVSZWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFyZVJlYWwgPSBhcmVSZWFsICYmIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZVJlYWwgPSBhcmVSZWFsICYmIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcmVSZWFsO1xuICAgICAgfVxuICAgIH1cbiAgXTtcblxuICB2YWxpZGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGluZGV4KSB7XG4gICAgaWYgKHZhbC52YWxpZGF0aW9uTWV0aG9kKHNlbGYpKSB7XG4gICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgYWxsR29vZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxHb29kID0gYWxsR29vZCAmJiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGxHb29kID0gYWxsR29vZCAmJiBmYWxzZTtcbiAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZSArIHZhbC5lcnJvck1lc3NhZ2UgKyAnPGJyPic7XG4gICAgfVxuICB9KTtcbiAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlLnRyaW0oKTtcbiAgXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogYWxsR29vZCxcbiAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICB9XG59O1xuXG52YXIgY3JlYXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uI2NyZWF0ZScpO1xuY3JlYXRlQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2YWxpZFN0YXRlID0gdmFsaWRhdGUoKTtcblxuICBpZiAoIXZhbGlkU3RhdGUuaXNWYWxpZCkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItbWVzc2FnZScpO1xuICAgIGVycm9yTWVzc2FnZS5pbm5lckhUTUwgPSB2YWxpZFN0YXRlLmVycm9yTWVzc2FnZTtcbiAgfSBlbHNlIHtcbiAgICBhbGVydChcIlZhbGlkIGZvcm0uIFRoYW5rcyBmb3Igc3VibWl0dGluZyFcIik7XG4gIH1cbn07XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
